===S.T.A.L.K.E.R. *.spawn compiler/decompiler for every build from 1465===

Дата последних правок: 18 мая 2011

Кратко: данный acdc предназначен для распаковки all.spawn/level.spawn от любого билда, начиная с 1465. Информацию
о версии спавна скрипт берет из параметров cse_abstract первой читаемой секции (version и script_version), 
в соответствии с чем и распаковывает спавн. Принадлежность объектов к уровням определяется по game.graph.
Добавлена также экспериментальная функция конвертирования спавна из одной версии в другую. На данный момент
поддерживаются все версии сталкера, начиная со 2го патча ТЧ.
Для корректной работы используйте с папкой stkutils.un_acdc, переименовав ее в stkutils

Использование:
Кладете all.spawn (или level.spawn) и game.graph в папку с программой, делаете батник (команды ниже),
запускаете батник, радуетесь жизни. Если распаковываете level.spawn, game.graph, очевидно, не нужен.

===[Распаковка спавна]===
Команда:  acdc -d all.spawn [-o outdir] [-l] [-2942]

-o <outdir> - папка для распакованного спавна. Если не задана, спавн распаковывается в корневую папку
-l - ключ для декомпиляции level.spawn
-2942 - ключ для распаковки спавна первого патча ТЧ.

===[Запаковка спавна]===
Команда:  acdc -c all.ltx [-f flag1[,...]] [-a level:point] [-o outfile] [-l] [-2942]

-o <outfile> - имя результирующего спавна. Если не задано - new.spawn.
-l - ключ для компиляции level.spawn
-2942 - ключ для запаковки спавна первого патча ТЧ.

===[Конвертирование спавна]===
Команда:  acdc -convert <location> [-game1 game1,<old_gvid0>] [-game2 <game2>,<new_gvid0>]

<location> - название локации, для которой конвертируется спавн. Для конвертации спавна всех локаций из all.spawn 
ставить all.

-game1 - задание старой версии спавна в формате <ключ старой версии>,<старый начальный game_vertex_id локации>.
Разделитель - запятая, без пробелов!
-game2 - задание новой версии спавна в формате <ключ новой версии>,<новый начальный game_vertex_id локации>.
Разделитель - запятая, без пробелов!

Пример: acdc -convert escape -game1 cs4,472 -game2 cop,934

===[Массовая замена вертексов]===
Команда:  acdc -parse <location> [-game1 <old_gvid0>] [-game2 <new_gvid0>] [-way]

<location> - имя ltx, в котором находится спавн.
-game1 - задание старого начального game_vertex_id локации.
-game2 - задание нового начального game_vertex_id локации.
-way - заставляет программу также обрабатывать way.

Пример: acdc -parse alife_l01_escape.ltx -game1 0 -game2 934 -way

======================================
	
Список ключей версий:

-soc1 - ТЧ, начиная со 2го патча, а также билд 3120
-cs0 - финалка ЧН
-cs3 - 3 патч ЧН
-cs4 - 4 патч ЧН и выше
-cop - ЗП (любой патч)

История правок:

18 мая 2011
	[+] добавлена поддержка встроенных в спавн графов.

17 мая 2011
	[i] исправлены stkutils, в прошлую версию попали скрипты от обычного acdc
	[+] добавлена функция массовой замены вертексов в распакованном спавне
	[+] добавлена функция определения принадлежности объекта к уровню по глобальному графу. 
Больше никакой возни с level.pm

15 мая 2011
	[i] исправлена распаковка некоторых level.spawn от третьего патча ЧН.
================================================================
Копирайты:
ACDC для ТЧ - bardak, для ЗП - bardak, Kolmogor. Все остальное - K.D.
Используйте/выкладывайте где и как хотите, с указанием авторов.